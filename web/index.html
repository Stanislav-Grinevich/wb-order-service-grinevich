<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <title>WB Order Viewer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; max-width: 800px; margin: 20px auto; padding: 0 12px; }
    input { padding: 8px; width: 360px; }
    button { padding: 8px 12px; margin-left: 8px; cursor: pointer; }
    pre { background: #f6f8fa; padding: 12px; border-radius: 8px; overflow: auto; }
  </style>
</head>
<body>
  <h1>Поиск заказа</h1>
  <p>Введите <code>order_uid</code> и нажмите «Найти».</p>
  <div>
    <input id="orderId" placeholder="например: b563feb7b2b84b6test" />
    <button id="btn">Найти</button>
  </div>
  <h2>Результат</h2>
  <pre id="result">пока пусто</pre>

  <script>
    document.getElementById('btn').onclick = async () => {
      const id = document.getElementById('orderId').value.trim();
      const pre = document.getElementById('result');
      if (!id) { pre.textContent = 'Введите order_uid'; return; }
      pre.textContent = 'Загрузка...';
      try {
        const res = await fetch('/order/' + encodeURIComponent(id));
        if (!res.ok) { pre.textContent = 'Не найдено (' + res.status + ')'; return; }
        const data = await res.json();
        pre.textContent = JSON.stringify(data, null, 2);
      } catch (e) {
        pre.textContent = 'Ошибка: ' + e.message;
      }
    };
  </script>
</body>
</html>
